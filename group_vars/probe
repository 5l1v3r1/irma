---

## Global
probe_user: "{{ default_user }}"
probe_group: "{{ default_group }}"

probe_install_dir: /opt/irma/irma-probe
probe_venv_dir: "{{ probe_install_dir }}/venv"


## Supervisor Role
supervisor_programs:
  - name: frontend_app
    command: "{{ probe_venv_dir }}/bin/celery worker -A probe.tasks --loglevel=INFO --without-gossip --without-mingle --without-heartbeat"
    directory: "{{ probe_install_dir }}"
    user: nobody
    numprocs: 1
    stdout_logfile: /var/log/supervisor/probe.log
    stderr_logfile: /var/log/supervisor/probe.log
    autostart: true
    stopwaitsecs: 600
    killasgroup: true
